<!DOCTYPE html>
<html lang="en-24" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.123.0">
    <meta name="description" content="">


    <link rel="icon" href="/docs-sat/images/favicon.png" type="image/png">

    <title>SAT Release Notes :: System Admin Toolkit (SAT)</title>

    
    <link href="/docs-sat/css/nucleus.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/fontawesome-all.min.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/hybrid.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/featherlight.min.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/perfect-scrollbar.min.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/auto-complete.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/atom-one-dark-reasonable.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/theme.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/tabs.css?1729740967" rel="stylesheet">
    <link href="/docs-sat/css/hugo-theme.css?1729740967" rel="stylesheet">
    
    <link href="/docs-sat/css/theme-blue.css?1729740967" rel="stylesheet">
    
    

    <script src="/docs-sat/js/jquery-3.3.1.min.js?1729740967"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/docs-sat/en-24/release_notes/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/docs-sat/en-24'>
  System Admin Toolkit
</a>

    </div>

    
    <section>
      <ul>
      
        <li>
          <div class="select-style padding">
          v <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en-26" value="/docs-sat/en-26/release_notes/">2.6</option>
                    
                  
              
                  
              
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="en-25" value="/docs-sat/en-25/release_notes/">2.5</option>
                    
                  
              
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-24" value="/docs-sat/en-24/release_notes/" selected>2.4</option>
                    
                  
              
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-23" value="/docs-sat/en-23/release_notes/">2.3</option>
                    
                  
              
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-22" value="/docs-sat/en-22/release_notes/">2.2</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
              
                  
              
                  
              
                  
              
                  
                    
                    
                      <option id="en-21" value="/docs-sat/en-21/release_notes/">2.1</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </li>
      

      
      </ul>
    </section>
  

    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs-sat/js/lunr.min.js?1729740967"></script>
<script type="text/javascript" src="/docs-sat/js/auto-complete.js?1729740967"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs-sat\/\/en-24";
    
</script>
<script type="text/javascript" src="/docs-sat/js/search.js?1729740967"></script>

    
  </div>

  

    <div class="highlightable">
    <ul class="topics">
      
      




 
  
    
      <li data-nav-id="/docs-sat/en-24/introduction/" title="Introduction to SAT" class="dd-item ">
        <a href="/docs-sat/en-24/introduction/">
        Introduction to SAT
        
        </a>
    </li>
     
  
 

      
      




 
  
    
    <li data-nav-id="/docs-sat/en-24/dashboards/" title="SAT Dashboards" class="dd-item
        
        
        
        ">
      <a href="/docs-sat/en-24/dashboards/">
          SAT Dashboards
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-sat/en-24/dashboards/sat_grafana_dashboards/" title="SAT Grafana Dashboards" class="dd-item ">
        <a href="/docs-sat/en-24/dashboards/sat_grafana_dashboards/">
        SAT Grafana Dashboards
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-sat/en-24/dashboards/sat_kibana_dashboards/" title="SAT Kibana Dashboards" class="dd-item ">
        <a href="/docs-sat/en-24/dashboards/sat_kibana_dashboards/">
        SAT Kibana Dashboards
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
      




 
  
    
      <li data-nav-id="/docs-sat/en-24/install/" title="SAT Installation" class="dd-item ">
        <a href="/docs-sat/en-24/install/">
        SAT Installation
        
        </a>
    </li>
     
  
 

      
      




 
  
    
      <li data-nav-id="/docs-sat/en-24/release_notes/" title="SAT Release Notes" class="dd-item active">
        <a href="/docs-sat/en-24/release_notes/">
        SAT Release Notes
        
        </a>
    </li>
     
  
 

      
      




 
  
    
      <li data-nav-id="/docs-sat/en-24/cne_install/" title="SAT Upgrade with CNE Installer" class="dd-item ">
        <a href="/docs-sat/en-24/cne_install/">
        SAT Upgrade with CNE Installer
        
        </a>
    </li>
     
  
 

      
      




 
  
    
    <li data-nav-id="/docs-sat/en-24/usage/" title="SAT Usage" class="dd-item
        
        
        
        ">
      <a href="/docs-sat/en-24/usage/">
          SAT Usage
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/docs-sat/en-24/usage/change_bos_version/" title="Change the BOS Version" class="dd-item ">
        <a href="/docs-sat/en-24/usage/change_bos_version/">
        Change the BOS Version
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/docs-sat/en-24/usage/sat_bootprep/" title="SAT Bootprep" class="dd-item ">
        <a href="/docs-sat/en-24/usage/sat_bootprep/">
        SAT Bootprep
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

      
    </ul>

    
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/docs-sat/en-24/'>HPE Cray EX System Admin Toolkit (SAT) Guide</a> > SAT Release Notes
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#summary-of-changes-in-sat-24">Summary of Changes in SAT 2.4</a>
      <ul>
        <li><a href="#inclusion-of-sat-in-csm">Inclusion of SAT in CSM</a></li>
        <li><a href="#sat-installation-improvements">SAT Installation Improvements</a></li>
        <li><a href="#decoupling-of-cray-sat-container-image-and-cray-sat-podman-package">Decoupling of <code>cray-sat</code> Container Image and <code>cray-sat-podman</code> Package</a></li>
        <li><a href="#improved-ncn-personalization-automation">Improved NCN Personalization Automation</a></li>
        <li><a href="#new-sat-bootprep-features">New <code>sat bootprep</code> Features</a></li>
        <li><a href="#added-blade-swap-support-to-sat-swap">Added Blade Swap Support to <code>sat swap</code></a></li>
        <li><a href="#support-for-bos-v2">Support for BOS <code>v2</code></a></li>
        <li><a href="#added-bos-fields-to-sat-status">Added BOS Fields to <code>sat status</code></a></li>
        <li><a href="#open-source-repositories">Open Source Repositories</a></li>
        <li><a href="#security">Security</a></li>
        <li><a href="#bug-fixes">Bug Fixes</a></li>
      </ul>
    </li>
    <li><a href="#summary-of-changes-in-sat-23">Summary of Changes in SAT 2.3</a>
      <ul>
        <li><a href="#new-sat-commands">New <code>sat</code> Commands</a></li>
        <li><a href="#current-working-directory-in-sat-container">Current Working Directory in SAT Container</a></li>
        <li><a href="#changes-to-sat-bootsys">Changes to <code>sat bootsys</code></a></li>
        <li><a href="#changes-to-sat-bootprep">Changes to <code>sat bootprep</code></a></li>
        <li><a href="#changes-to-sat-status">Changes to <code>sat status</code></a></li>
        <li><a href="#compatibility-with-csm-12">Compatibility with CSM 1.2</a></li>
        <li><a href="#gpg-checking">GPG Checking</a></li>
        <li><a href="#security-1">Security</a></li>
        <li><a href="#bug-fixes-1">Bug Fixes</a></li>
      </ul>
    </li>
    <li><a href="#summary-of-changes-in-sat-22">Summary of Changes in SAT 2.2</a>
      <ul>
        <li><a href="#known-issues-in-sat-22">Known Issues in SAT 2.2</a></li>
        <li><a href="#new-sat-commands-1">New <code>sat</code> Commands</a></li>
        <li><a href="#additional-install-automation">Additional Install Automation</a></li>
        <li><a href="#changes-to-product-catalog-data-schema">Changes to Product Catalog Data Schema</a></li>
        <li><a href="#support-for-uninstall-and-activation-of-sat-versions">Support for Uninstall and Activation of SAT Versions</a></li>
        <li><a href="#improvements-to-sat-status">Improvements to <code>sat status</code></a></li>
        <li><a href="#added-support-for-json-output">Added Support for JSON Output</a></li>
        <li><a href="#usability-improvements">Usability Improvements</a></li>
        <li><a href="#default-log-level-changed">Default Log Level Changed</a></li>
        <li><a href="#more-granular-log-level-configuration-options">More Granular Log Level Configuration Options</a></li>
        <li><a href="#podman-wrapper-script-improvements">Podman Wrapper Script Improvements</a></li>
        <li><a href="#configurable-http-timeout">Configurable HTTP Timeout</a></li>
        <li><a href="#sat-bootsys-improvements"><code>sat bootsys</code> Improvements</a></li>
        <li><a href="#sat-xname2nid-improvements"><code>sat xname2nid</code> Improvements</a></li>
        <li><a href="#usage-of-v2-hsm-api">Usage of <code>v2</code> HSM API</a></li>
        <li><a href="#sat-diag-limited-to-hsn-switches"><code>sat diag</code> Limited to HSN Switches</a></li>
        <li><a href="#sat-showrev-enhancements"><code>sat showrev</code> Enhancements</a></li>
        <li><a href="#cray-sat-container-image-size-reduction"><code>cray-sat</code> Container Image Size Reduction</a></li>
        <li><a href="#bug-fixes-2">Bug Fixes</a></li>
      </ul>
    </li>
    <li><a href="#summary-of-sat-changes-in-shasta-v15">Summary of SAT Changes in Shasta v1.5</a>
      <ul>
        <li><a href="#install-changes-to-separate-product-from-csm">Install Changes to Separate Product from CSM</a></li>
        <li><a href="#removal-of-direct-redfish-access">Removal of Direct Redfish Access</a></li>
        <li><a href="#additional-fields-in-sat-setrev-and-sat-showrev">Additional Fields in <code>sat setrev</code> and <code>sat showrev</code></a></li>
        <li><a href="#improvements-to-sat-bootsys">Improvements to <code>sat bootsys</code></a></li>
        <li><a href="#bug-fixes-and-security-fixes">Bug Fixes and Security Fixes</a></li>
        <li><a href="#other-notable-changes">Other Notable Changes</a></li>
      </ul>
    </li>
    <li><a href="#summary-of-sat-changes-in-shasta-v141">Summary of SAT Changes in Shasta v1.4.1</a>
      <ul>
        <li><a href="#new-commands-to-translate-between-nids-and-xnames">New Commands to Translate Between NIDs and XNames</a></li>
        <li><a href="#bug-fixes-3">Bug Fixes</a></li>
      </ul>
    </li>
    <li><a href="#summary-of-sat-changes-in-shasta-v14">Summary of SAT Changes in Shasta v1.4</a>
      <ul>
        <li><a href="#sat-as-an-independent-product">SAT as an Independent Product</a></li>
        <li><a href="#sat-running-in-a-container-under-podman">SAT Running in a Container Under Podman</a></li>
        <li><a href="#new-sat-init-command-and-config-file-location-change">New <code>sat init</code> Command and Config File Location Change</a></li>
        <li><a href="#additional-types-added-to-sat-hwinv">Additional Types Added to <code>sat hwinv</code></a></li>
        <li><a href="#site-information-stored-by-sat-setrev-in-s3">Site Information Stored by <code>sat setrev</code> in S3</a></li>
        <li><a href="#product-version-information-shown-by-sat-showrev">Product Version Information Shown by <code>sat showrev</code></a></li>
        <li><a href="#additional-changes-to-sat-showrev">Additional Changes to <code>sat showrev</code></a></li>
        <li><a href="#removal-of-sat-cablecheck">Removal of <code>sat cablecheck</code></a></li>
        <li><a href="#sat-swap-command-compatibility-with-next-gen-fabric-controller"><code>sat swap</code> Command Compatibility with Next-gen Fabric Controller</a></li>
        <li><a href="#sat-bootsys-functionality"><code>sat bootsys</code> Functionality</a></li>
        <li><a href="#log-file-location-change">Log File Location Change</a></li>
      </ul>
    </li>
    <li><a href="#summary-of-sat-changes-in-shasta-v132">Summary of SAT Changes in Shasta v1.3.2</a>
      <ul>
        <li><a href="#sat-swap-command-for-switch-and-cable-replacement"><code>sat swap</code> Command for Switch and Cable Replacement</a></li>
        <li><a href="#addition-of-stages-to-sat-bootsys-command">Addition of Stages to <code>sat bootsys</code> Command</a></li>
      </ul>
    </li>
    <li><a href="#summary-of-sat-changes-in-shasta-v13">Summary of SAT Changes in Shasta v1.3</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
            </h1>
          

        


<h1 id="sat-release-notes">SAT Release Notes</h1>
<h2 id="summary-of-changes-in-sat-24">Summary of Changes in SAT 2.4</h2>
<p>The 2.4.13 version of the SAT product includes:</p>
<ul>
<li>Version 3.19.3 of the <code>sat</code> python package and CLI.</li>
<li>Version 2.0.0-1 of the <code>sat-podman</code> wrapper script.</li>
<li>Version 1.5.5 of the <code>sat-install-utility</code> container image.</li>
<li>Version 3.3.1 of the <code>cfs-config-util</code> container image.</li>
</ul>
<p>Because of installation refactoring efforts, the following two components
are no longer delivered with SAT:</p>
<ul>
<li><code>sat-cfs-install</code> container image</li>
<li><code>sat-cfs-install</code> Helm chart</li>
</ul>
<h3 id="inclusion-of-sat-in-csm">Inclusion of SAT in CSM</h3>
<p>A version of the <code>cray-sat</code> container image is now included in CSM. For more
information, see <a href="/docs-sat/en-24/introduction/#sat-in-csm">SAT in CSM</a>.</p>
<h3 id="sat-installation-improvements">SAT Installation Improvements</h3>
<p>The SAT <code>install.sh</code> script no longer uses a <code>sat-cfs-install</code> Helm chart and
container image to upload its Ansible content to the <code>sat-config-management</code>
repository in VCS. Instead, it uses Podman to run the <code>cf-gitea-import</code> container
directly. Some of the benefits of this change include the following:</p>
<ul>
<li>Fewer container images that need to be managed by the SAT product</li>
<li>Simplified SAT installation without Helm charts or Loftsman manifests</li>
<li>Reduced SAT installation time</li>
<li><a href="/docs-sat/en-24/#decoupling-of-cray-sat-container-image-and-cray-sat-podman-package">Decoupling of <code>cray-sat</code> container image and <code>cray-sat-podman</code> package</a></li>
</ul>
<h3 id="decoupling-of-cray-sat-container-image-and-cray-sat-podman-package">Decoupling of <code>cray-sat</code> Container Image and <code>cray-sat-podman</code> Package</h3>
<p>In older SAT releases, the <code>sat</code> wrapper script that was provided by the
<code>cray-sat-podman</code> package installed on Kubernetes master NCNs included a
hard-coded version of the <code>cray-sat</code> container image. As a result, every new
version of the <code>cray-sat</code> image required a corresponding new version of the
<code>cray-sat-podman</code> package.</p>
<p>In this release, this tight coupling of the <code>cray-sat-podman</code> package and the
<code>cray-sat</code> container image was removed. The <code>sat</code> wrapper script provided
by the <code>cray-sat-podman</code> package now looks for the version of the <code>cray-sat</code>
container image in the <code>/opt/cray/etc/sat/version</code> file. This file is populated
with the correct version of the <code>cray-sat</code> container image by the SAT layer of
the CFS configuration that is applied to management NCNs. If the <code>version</code> file
does not exist, the wrapper script defaults to the version of the <code>cray-sat</code>
container image delivered with the latest version of CSM installed on the system.</p>
<h3 id="improved-ncn-personalization-automation">Improved NCN Personalization Automation</h3>
<p>The steps for performing NCN personalization as part of the SAT installation
were moved out of the <code>install.sh</code> script and into a new
<code>update-mgmt-ncn-cfs-config.sh</code> script that is provided in the SAT release
distribution. The new script provides additional flexibility in how it modifies
the NCN personalization CFS configuration for SAT. It can modify an existing CFS
configuration by name, a CFS configuration being built in a JSON file, or an
existing CFS configuration that applies to certain components. For more information,
see <a href="/docs-sat/en-24/install/#perform-ncn-personalization">Perform NCN Personalization</a>.</p>
<h3 id="new-sat-bootprep-features">New <code>sat bootprep</code> Features</h3>
<p>The following new features were added to the <code>sat bootprep</code> command:</p>
<ul>
<li>
<p>Variable substitutions using Jinja2 templates in certain fields of the
<code>sat bootprep</code> input file</p>
<p>For more information, see
<a href="/docs-sat/en-24/usage/sat_bootprep/#hpc-csm-software-recipe-variable-substitutions">HPC CSM Software Recipe Variable Substitutions</a>
and <a href="/docs-sat/en-24/usage/sat_bootprep/#dynamic-variable-substitutions">Dynamic Variable Substitutions</a>.</p>
</li>
<li>
<p>Schema version validation in the <code>sat bootprep</code> input files</p>
<p>For more information, see <a href="/docs-sat/en-24/usage/sat_bootprep/#providing-a-schema-version">Providing a Schema Version</a>.</p>
</li>
<li>
<p>Ability to look up images and recipes provided by products</p>
<p>For more information, see <a href="/docs-sat/en-24/usage/sat_bootprep/#defining-ims-images">Defining IMS Images</a>.</p>
</li>
</ul>
<p>The schema of the <code>sat bootprep</code> input files was also changed to support these
new features:</p>
<ul>
<li>The base recipe or image used by an image in the input file should now be
specified under a <code>base</code> key instead of under an <code>ims</code> key. The old <code>ims</code>
key is deprecated.</li>
<li>To specify an image that depends on another image in the input file, the
dependent image should specify the dependency under <code>base.image_ref</code>.
You should no longer use the IMS name of the image on which it depends.</li>
<li>The image used by a session template should now be specified under
<code>image.ims.name</code>, <code>image.ims.id</code>, or <code>image.image_ref</code>. Specifying a string
value directly under the <code>image</code> key is deprecated.</li>
</ul>
<p>For more information on defining IMS images and BOS session templates in the
<code>sat bootprep</code> input file, see <a href="/docs-sat/en-24/usage/sat_bootprep/#defining-ims-images">Defining IMS Images</a>
and <a href="/docs-sat/en-24/usage/sat_bootprep/#defining-bos-session-templates">Defining BOS Session Templates</a>.</p>
<h3 id="added-blade-swap-support-to-sat-swap">Added Blade Swap Support to <code>sat swap</code></h3>
<p>The <code>sat swap</code> command was updated to support swapping compute and UAN blades
with <code>sat swap blade</code>. This functionality is described in the following processes
of the <a href="https://cray-hpe.github.io/docs-csm"><em>Cray System Management Documentation</em></a>:</p>
<ul>
<li><strong>Adding a Liquid-cooled blade to a System Using SAT</strong></li>
<li><strong>Removing a Liquid-cooled blade from a System Using SAT</strong></li>
<li><strong>Replace a Compute Blade Using SAT</strong></li>
<li><strong>Swap a Compute Blade with a Different System Using SAT</strong></li>
</ul>
<h3 id="support-for-bos-v2">Support for BOS <code>v2</code></h3>
<p>A new <code>v2</code> version of the Boot Orchestration Service (BOS) is available in CSM
1.3.0. SAT has added support for BOS <code>v2</code>. This impacts the following commands
that interact with BOS:</p>
<ul>
<li><code>sat bootprep</code></li>
<li><code>sat bootsys</code></li>
<li><code>sat status</code></li>
</ul>
<p>By default, SAT uses BOS <code>v1</code>. However, you can choose the BOS version you want
to use. For more information, see <a href="/docs-sat/en-24/usage/change_bos_version/">Change the BOS Version</a>.</p>
<h3 id="added-bos-fields-to-sat-status">Added BOS Fields to <code>sat status</code></h3>
<p>When using BOS <code>v2</code>, <code>sat status</code> outputs additional fields. These fields show
the most recent BOS session, session template, booted image, and boot status for
each node. An additional <code>--bos-fields</code> option was added to limit the output of
<code>sat status</code> to these fields. The fields are not displayed when using BOS <code>v1</code>.</p>
<h3 id="open-source-repositories">Open Source Repositories</h3>
<p>This is the first release of SAT built from open source code repositories.
As a result, build infrastructure was changed to use an external Jenkins instance,
and artifacts are now published to an external Artifactory instance. These
changes should not impact the functionality of the SAT product in any way.</p>
<h3 id="security">Security</h3>
<h4 id="cve-mitigation">CVE Mitigation</h4>
<ul>
<li>The <code>paramiko</code> Python package version was updated from 2.9.2 to 2.10.1 to
mitigate CVE-2022-24302.</li>
<li>The <code>oauthlib</code> Python package version was updated from 3.2.0 to 3.2.1 to
mitigate CVE-2022-36087.</li>
</ul>
<h4 id="restricted-permissions-on-sat-config-files-and-directories">Restricted Permissions on SAT Config Files and Directories</h4>
<p>SAT stores information used to authenticate to the API gateway with Keycloak.
Token files are stored in the <code>~/.config/sat/tokens/</code> directory. Those files
have always had permissions appropriately set to restrict them to be readable
only by the user.</p>
<p>Keycloak usernames used to authenticate to the API gateway are stored in the
SAT config file at <code>/.config/sat/sat.toml</code>. Keycloak usernames are also used in
the file names of tokens stored in <code>/.config/sat/tokens</code>. As an additional
security measure, SAT now restricts the permissions of the SAT config file
to be readable and writable only by the user. It also restricts the tokens
directory and the entire SAT config directory <code>~/.config/sat</code> to be accessible
only by the user. This prevents other users on the system from viewing
Keycloak usernames used to authenticate to the API gateway.</p>
<h3 id="bug-fixes">Bug Fixes</h3>
<ul>
<li>Fixed an issue where <code>sat init</code> did not print a message confirming a new
configuration file was created.</li>
<li>Fixed an issue where <code>sat showrev</code> exited with a traceback if the file
<code>/opt/cray/etc/site_info.yaml</code> existed but was empty. This could occur if the
user exited <code>sat setrev</code> with <code>Ctrl-C</code>.</li>
<li>Fixed outdated information in the <code>sat bootsys</code> man page, and added a
description of the command stages.</li>
</ul>
<h2 id="summary-of-changes-in-sat-23">Summary of Changes in SAT 2.3</h2>
<p>The 2.3.4 version of the SAT product includes:</p>
<ul>
<li>Version 3.15.4 of the <code>sat</code> python package and CLI</li>
<li>Version 1.6.11 of the <code>sat-podman</code> wrapper script</li>
<li>Version 1.2.0 of the <code>sat-cfs-install</code> container image</li>
<li>Version 2.0.0 of the <code>sat-cfs-install</code> Helm chart</li>
<li>Version 1.5.0 of the <code>sat-install-utility</code> container image</li>
<li>Version 2.0.3 of the <code>cfs-config-util</code> container image</li>
</ul>
<h3 id="new-sat-commands">New <code>sat</code> Commands</h3>
<p>None.</p>
<h3 id="current-working-directory-in-sat-container">Current Working Directory in SAT Container</h3>
<p>When running <code>sat</code> commands, the current working directory is now mounted in the
container as <code>/sat/share</code>, and the current working directory within the container
is also <code>/sat/share</code>.</p>
<p>Files in the current working directory must be specified using relative paths to
that directory, because the current working directory is always mounted on <code>/sat/share</code>.
Absolute paths should be avoided, and paths that are outside of <code>$HOME</code> or <code>$PWD</code>
are never accessible to the container environment.</p>
<p>The home directory is still mounted on the same path inside the container as it
is on the host.</p>
<h3 id="changes-to-sat-bootsys">Changes to <code>sat bootsys</code></h3>
<p>The following options were added to <code>sat bootsys</code>.</p>
<ul>
<li><code>--bos-limit</code></li>
<li><code>--recursive</code></li>
</ul>
<p>The <code>--bos-limit</code> option passes a given limit string to a BOS session. The <code>--recursive</code>
option specifies a slot or other higher-level component in the limit string</p>
<h3 id="changes-to-sat-bootprep">Changes to <code>sat bootprep</code></h3>
<p>The <code>--delete-ims-jobs</code> option was added to <code>sat bootprep run</code>. It deletes IMS
jobs after <code>sat bootprep</code> is run. Jobs are no longer deleted by default.</p>
<h3 id="changes-to-sat-status">Changes to <code>sat status</code></h3>
<p><code>sat status</code> now includes information about nodes&rsquo; CFS configuration statuses, such
as desired configuration, configuration status, and error count.</p>
<p>The output of <code>sat status</code> now splits different component types into different report tables.</p>
<p>The following options were added to <code>sat status</code>.</p>
<ul>
<li><code>--hsm-fields</code>, <code>--sls-fields</code>, <code>--cfs-fields</code></li>
<li><code>--bos-template</code></li>
</ul>
<p>The <code>--hsm-fields</code>, <code>--sls-fields</code>, <code>--cfs-fields</code> options limit the output columns
according to specified CSM services.</p>
<p>The <code>--bos-template</code> option filters the status report according to the specified
session template&rsquo;s boot sets.</p>
<h3 id="compatibility-with-csm-12">Compatibility with CSM 1.2</h3>
<p>The following components were modified to be compatible with CSM 1.2.</p>
<ul>
<li><code>sat-cfs-install</code> container image and Helm chart</li>
<li><code>sat-install-utility</code> container image</li>
<li>SAT product installer</li>
</ul>
<h3 id="gpg-checking">GPG Checking</h3>
<p>The <code>sat-ncn</code> Ansible role provided by <code>sat-cfs-install</code> was modified to enable
GPG checks on packages while leaving GPG checks disabled on repository metadata.</p>
<h3 id="security-1">Security</h3>
<p>Updated <code>urllib3</code> dependency to version 1.26.5 to mitigate CVE-2021-33503 and refreshed
Python dependency versions.</p>
<h3 id="bug-fixes-1">Bug Fixes</h3>
<p>Minor bug fixes were made in each of the repositories. For full change lists,
refer to each repository’s <code>CHANGELOG.md</code> file.</p>
<p>The <a href="/docs-sat/en-24/#known-issues-in-sat-22">known issues listed under the SAT 2.2 release</a> were fixed.</p>
<h2 id="summary-of-changes-in-sat-22">Summary of Changes in SAT 2.2</h2>
<p>SAT 2.2.16 was released on February 25th, 2022.</p>
<p>This version of the SAT product included:</p>
<ul>
<li>Version 3.14.0 of the <code>sat</code> python package and CLI</li>
<li>Version 1.6.4 of the <code>sat-podman</code> wrapper script</li>
<li>Version 1.0.4 of the <code>sat-cfs-install</code> container image and Helm chart</li>
</ul>
<p>It also added the following new components:</p>
<ul>
<li>Version 1.4.3 of the <code>sat-install-utility</code> container image</li>
<li>Version 2.0.2 of the <code>cfs-config-util</code> container image</li>
</ul>
<p>The following sections detail the changes in this release.</p>
<h3 id="known-issues-in-sat-22">Known Issues in SAT 2.2</h3>
<h4 id="sat-command-unavailable-in-sat-bash-shell"><code>sat</code> Command Unavailable in <code>sat bash</code> Shell</h4>
<p>After launching a shell within the SAT container with <code>sat bash</code>, the <code>sat</code> command will not
be found. For example:</p>
<pre tabindex="0"><code class="language-screen" data-lang="screen">(CONTAINER-ID) sat-container:~ # sat status
bash: sat: command not found
</code></pre><p>This can be resolved temporarily in one of two ways. <code>/sat/venv/bin/</code> may be prepended to the
<code>$PATH</code> environment variable:</p>
<pre tabindex="0"><code class="language-screen" data-lang="screen">(CONTAINER-ID) sat-container:~ # export PATH=/sat/venv/bin:$PATH
(CONTAINER-ID) sat-container:~ # sat status
</code></pre><p>Or, the file <code>/sat/venv/bin/activate</code> may be sourced:</p>
<pre tabindex="0"><code class="language-screen" data-lang="screen">(CONTAINER-ID) sat-container:~ # source /sat/venv/bin/activate
(CONTAINER-ID) sat-container:~ # sat status
</code></pre><h4 id="tab-completion-unavailable-in-sat-bash-shell">Tab Completion Unavailable in <code>sat bash</code> Shell</h4>
<p>After launching a shell within the SAT container with <code>sat bash</code>, tab completion for <code>sat</code>
commands does not work.</p>
<p>This can be resolved temporarily by sourcing the file <code>/etc/bash_completion.d/sat-completion.bash</code>:</p>
<pre tabindex="0"><code class="language-screen" data-lang="screen">source /etc/bash_completion.d/sat-completion.bash
</code></pre><h4 id="oci-runtime-permission-error-when-running-sat-in-root-directory">OCI Runtime Permission Error when Running <code>sat</code> in Root Directory</h4>
<p><code>sat</code> commands will not work if the current directory is <code>/</code>. For example:</p>
<pre tabindex="0"><code class="language-screen" data-lang="screen">ncn-m001:/ # sat --help
Error: container_linux.go:380: starting container process caused: process_linux.go:545: container init caused: open /dev/console: operation not permitted: OCI runtime permission denied error
</code></pre><p>To resolve, run <code>sat</code> in another directory.</p>
<h4 id="duplicate-mount-error-when-running-sat-in-config-directory">Duplicate Mount Error when Running <code>sat</code> in Config Directory</h4>
<p><code>sat</code> commands will not work if the current directory is <code>~/.config/sat</code>. For example:</p>
<pre tabindex="0"><code class="language-screen" data-lang="screen">ncn-m001:~/.config/sat # sat --help
Error: /root/.config/sat: duplicate mount destination
</code></pre><p>To resolve, run <code>sat</code> in another directory.</p>
<h3 id="new-sat-commands-1">New <code>sat</code> Commands</h3>
<ul>
<li><code>sat bootprep</code> automates the creation of CFS configurations, the build and
customization of IMS images, and the creation of BOS session templates. For
more information, see <a href="/docs-sat/en-24/usage/sat_bootprep/">SAT Bootprep</a>.</li>
<li><code>sat slscheck</code> performs a check for consistency between the System Layout
Service (SLS) and the Hardware State Manager (HSM).</li>
<li><code>sat bmccreds</code> provides a simple interface for interacting with the System
Configuration Service (SCSD) to set BMC Redfish credentials.</li>
<li><code>sat hwhist</code> displays hardware component history by XName (location) or by
its Field-Replaceable Unit ID (FRUID). This command queries the Hardware
State Manager (HSM) API to obtain this information. Since the <code>sat hwhist</code>
command supports querying for the history of a component by its FRUID, the
FRUID of components has been added to the output of <code>sat hwinv</code>.</li>
</ul>
<h3 id="additional-install-automation">Additional Install Automation</h3>
<p>The following automation has been added to the install script, <code>install.sh</code>:</p>
<ul>
<li>Wait for the completion of the <code>sat-config-import</code> Kubernetes job, which is
started when the <code>sat-cfs-install</code> Helm chart is deployed.</li>
<li>Automate the modification of the CFS configuration, which applies to master
management NCNs (for example, <code>ncn-personalization</code>).</li>
</ul>
<h3 id="changes-to-product-catalog-data-schema">Changes to Product Catalog Data Schema</h3>
<p>The SAT product uploads additional information to the <code>cray-product-catalog</code>
Kubernetes ConfigMap detailing the components it provides, including container
(Docker) images, Helm charts, RPMs, and package repositories.</p>
<p>This information is used to support uninstall and activation of SAT product
versions moving forward.</p>
<h3 id="support-for-uninstall-and-activation-of-sat-versions">Support for Uninstall and Activation of SAT Versions</h3>
<p>Beginning with the 2.2 release, SAT now provides partial support for the
uninstall and activation of the SAT product stream.</p>
<p>For more information, see <a href="/docs-sat/en-24/install/#uninstall-removing-a-version-of-sat">Uninstall: Removing a Version of
SAT</a> and <a href="/docs-sat/en-24/install/#activate-switching-between-versions">Activate: Switching
Between Versions</a>.</p>
<h3 id="improvements-to-sat-status">Improvements to <code>sat status</code></h3>
<p>A <code>Subrole</code> column has been added to the output of <code>sat status</code>. This allows you
to easily differentiate between master, worker, and storage nodes in the
management role, for example.</p>
<p>Hostname information from SLS has been added to <code>sat status</code> output.</p>
<h3 id="added-support-for-json-output">Added Support for JSON Output</h3>
<p>Support for JSON-formatted output has been added to commands which currently
support the <code>--format</code> option, such as <code>hwinv</code>, <code>status</code>, and <code>showrev</code>.</p>
<h3 id="usability-improvements">Usability Improvements</h3>
<p>Many usability improvements have been made to multiple <code>sat</code> commands,
mostly related to filtering command output. The following are some highlights:</p>
<ul>
<li>Added <code>--fields</code> option to display only specific fields for subcommands which
display tabular reports.</li>
<li>Added ability to filter on exact matches of a field name.</li>
<li>Improved handling of multiple matches of a field name in <code>--filter</code> queries
so that the first match is used, similar to <code>--sort-by</code>.</li>
<li>Added support for <code>--filter</code>, <code>--fields</code>, and <code>--reverse</code> for summaries
displayed by <code>sat hwinv</code>.</li>
<li>Added borders to summary tables generated by <code>sat hwinv</code>.</li>
<li>Improved documentation in the man pages.</li>
</ul>
<h3 id="default-log-level-changed">Default Log Level Changed</h3>
<p>The default log level for <code>stderr</code> has been changed from &ldquo;WARNING&rdquo; to &ldquo;INFO&rdquo;. For
more information, see <a href="/docs-sat/en-24/install/#sat-logging">SAT Logging</a>.</p>
<h3 id="more-granular-log-level-configuration-options">More Granular Log Level Configuration Options</h3>
<p>With the command-line options <code>--loglevel-stderr</code> and <code>--loglevel-file</code>, the log level
can now be configured separately for <code>stderr</code> and the log file.</p>
<p>The existing <code>--loglevel</code> option is now an alias for the <code>--loglevel-stderr</code> option.</p>
<h3 id="podman-wrapper-script-improvements">Podman Wrapper Script Improvements</h3>
<p>The Podman wrapper script is the script installed at <code>/usr/bin/sat</code> on the
master management NCNs by the <code>cray-sat-podman</code> RPM that runs the <code>cray-sat</code>
container in <code>podman</code>. The following subsections detail improvements that were
made to the wrapper script in this release.</p>
<h4 id="mounting-of-home-and-current-directories-in-cray-sat-container">Mounting of $HOME and Current Directories in <code>cray-sat</code> Container</h4>
<p>The Podman wrapper script that launches the <code>cray-sat</code> container with <code>podman</code>
has been modified to mount the user&rsquo;s current directory and home directory into
the <code>cray-sat</code> container to provide access to local files in the container.</p>
<h4 id="podman-wrapper-script-documentation-improvements">Podman Wrapper Script Documentation Improvements</h4>
<p>The man page for the Podman wrapper script, which is accessed by typing <code>man sat</code> on a master management NCN, has been improved to document the following:</p>
<ul>
<li>Environment variables that affect execution of the wrapper script</li>
<li>Host files and directories mounted in the container</li>
</ul>
<h4 id="fixes-to-podman-wrapper-script-output-redirection">Fixes to Podman Wrapper Script Output Redirection</h4>
<p>Fixed issues with redirecting <code>stdout</code> and <code>stderr</code>, and piping output to commands,
such as <code>awk</code>, <code>less</code>, and <code>more</code>.</p>
<h3 id="configurable-http-timeout">Configurable HTTP Timeout</h3>
<p>A new <code>sat</code> option has been added to configure the HTTP timeout length for
requests to the API gateway. For more information, refer to <code>sat-man sat</code>.</p>
<h3 id="sat-bootsys-improvements"><code>sat bootsys</code> Improvements</h3>
<p>Many improvements and fixes have been made to <code>sat bootsys</code>. The following are some
highlights:</p>
<ul>
<li>Added the <code>--excluded-ncns</code> option, which can be used to omit NCNs
from the <code>platform-services</code> and <code>ncn-power</code> stages in case they are
inaccessible.</li>
<li>Disruptive shutdown stages in <code>sat bootsys shutdown</code> now prompt the user to
continue before proceeding. A new option, <code>--disruptive</code>, will bypass this.</li>
<li>Improvements to Ceph service health checks and restart during the <code>platform-services</code>
stage of <code>sat bootsys boot</code>.</li>
</ul>
<h3 id="sat-xname2nid-improvements"><code>sat xname2nid</code> Improvements</h3>
<p><code>sat xname2nid</code> can now recursively expand slot, chassis, and cabinet XNames to
a list of NIDs in those locations.</p>
<p>A new <code>--format</code> option has been added to <code>sat xname2nid</code>. It sets the output format to
either &ldquo;range&rdquo; (the default) or &ldquo;NID&rdquo;. The &ldquo;range&rdquo; format displays NIDs in a
compressed range format suitable for use with a workload manager like Slurm.</p>
<h3 id="usage-of-v2-hsm-api">Usage of <code>v2</code> HSM API</h3>
<p>The commands which interact with HSM (for example, <code>sat status</code> and <code>sat hwinv</code>) now
use the <code>v2</code> HSM API.</p>
<h3 id="sat-diag-limited-to-hsn-switches"><code>sat diag</code> Limited to HSN Switches</h3>
<p><code>sat diag</code> will now only operate against HSN switches by default. These are the
only controllers that support running diagnostics with HMJTD.</p>
<h3 id="sat-showrev-enhancements"><code>sat showrev</code> Enhancements</h3>
<p>A column has been added to the output of <code>sat showrev</code> that indicates whether a
product version is &ldquo;active&rdquo;. The definition of &ldquo;active&rdquo; varies across products,
and not all products may set an &ldquo;active&rdquo; version.</p>
<p>For SAT, the active version is the one with its hosted-type package repository in
Nexus set as the member of the group-type package repository in Nexus,
meaning that it will be used when installing the <code>cray-sat-podman</code> RPM.</p>
<h3 id="cray-sat-container-image-size-reduction"><code>cray-sat</code> Container Image Size Reduction</h3>
<p>The size of the <code>cray-sat</code> container image has been approximately cut in half by
leveraging multi-stage builds. This also improved the repeatability of the unit
tests by running them in the container.</p>
<h3 id="bug-fixes-2">Bug Fixes</h3>
<p>Minor bug fixes were made in <code>cray-sat</code> and in <code>cray-sat-podman</code>. For full change lists,
refer to each repository&rsquo;s <code>CHANGELOG.md</code> file.</p>
<h2 id="summary-of-sat-changes-in-shasta-v15">Summary of SAT Changes in Shasta v1.5</h2>
<p>We released version 2.1.16 of the SAT product in Shasta v1.5.</p>
<p>This version of the SAT product included:</p>
<ul>
<li>Version 3.7.4 of the <code>sat</code> python package and CLI</li>
<li>Version 1.4.10 of the <code>sat-podman</code> wrapper script</li>
</ul>
<p>It also added the following new component:</p>
<ul>
<li>Version 1.0.3 of the <code>sat-cfs-install</code> docker image and helm chart</li>
</ul>
<p>The following sections detail the changes in this release.</p>
<h3 id="install-changes-to-separate-product-from-csm">Install Changes to Separate Product from CSM</h3>
<p>This release further decouples the installation of the SAT product from the CSM
product. The <code>cray-sat-podman</code> RPM is no longer installed in the management
non-compute node (NCN) image. Instead, the <code>cray-sat-podman</code> RPM is installed on
all master management NCNs via an Ansible playbook which is referenced by a
layer of the CFS configuration that applies to management NCNs. This CFS
configuration is typically named <code>ncn-personalization</code>.</p>
<p>The SAT product now includes a Docker image and a Helm chart named
<code>sat-cfs-install</code>. The SAT install script, <code>install.sh</code>, deploys the Helm chart
with Loftsman. This helm chart deploys a Kubernetes job that imports the
SAT Ansible content to a git repository in VCS (Gitea) named <code>sat-config-management</code>.
This repository is referenced by the layer added to the NCN personalization
CFS configuration.</p>
<h3 id="removal-of-direct-redfish-access">Removal of Direct Redfish Access</h3>
<p>All commands which used to access Redfish directly have either been removed or
modified to use higher-level service APIs. This includes the following commands:</p>
<ul>
<li><code>sat sensors</code></li>
<li><code>sat diag</code></li>
<li><code>sat linkhealth</code></li>
</ul>
<p>The <code>sat sensors</code> command has been rewritten to use the SMA telemetry API to
obtain the latest sensor values. The command&rsquo;s usage has changed slightly, but
legacy options work as before, so it is backwards compatible. Additionally, new
commands have been added.</p>
<p>The <code>sat diag</code> command has been rewritten to use a new service called Fox, which
is delivered with the CSM-Diags product. The <code>sat diag</code> command now launches
diagnostics using the Fox service, which launches the corresponding diagnostic
programs on controllers using the Hardware Management Job and Task Daemon
(HMJTD) over Redfish. Essentially, Fox serves as a proxy for us to start
diagnostics over Redfish.</p>
<p>The <code>sat linkhealth</code> command has been removed. Its functionality has been
replaced by functionality from the Slingshot Topology Tool (STT) in the
fabric manager pod.</p>
<p>The Redfish username and password command line options and config file options
have been removed. For more information, see <a href="/docs-sat/en-24/install/#remove-obsolete-configuration-file-sections">Remove Obsolete Configuration
File Sections</a>.</p>
<h3 id="additional-fields-in-sat-setrev-and-sat-showrev">Additional Fields in <code>sat setrev</code> and <code>sat showrev</code></h3>
<p><code>sat setrev</code> now collects the following information from the admin, which is then displayed by <code>sat showrev</code>:</p>
<ul>
<li>System description</li>
<li>Product number</li>
<li>Company name</li>
<li>Country code</li>
</ul>
<p>Additional guidance and validation has been added to each field collected by
<code>sat setrev</code>. This sets the stage for <code>sdu setup</code> to stop collecting this
information and instead collect it from <code>sat showrev</code> or its S3 bucket.</p>
<h3 id="improvements-to-sat-bootsys">Improvements to <code>sat bootsys</code></h3>
<p>The <code>platform-services</code> stage of the <code>sat bootsys boot</code> command has been
improved to start inactive Ceph services, unfreeze Ceph, and wait for Ceph
health in the correct order. The <code>ceph-check</code> stage has been removed as it is no
longer needed.</p>
<p>The <code>platform-services</code> stage of <code>sat bootsys</code> boot now prompts for confirmation
of the storage NCN hostnames in addition to the Kubernetes masters and workers.</p>
<h3 id="bug-fixes-and-security-fixes">Bug Fixes and Security Fixes</h3>
<ul>
<li>Improved error handling in <code>sat firmware</code>.</li>
<li>Incremented version of Alpine Linux to 3.13.2 to address a security
vulnerability.</li>
</ul>
<h3 id="other-notable-changes">Other Notable Changes</h3>
<ul>
<li>Ansible has been removed from the <code>cray-sat</code> container image.</li>
<li>Support for the Firmware Update Service (FUS) has been removed from the <code>sat firmware</code> command.</li>
</ul>
<h2 id="summary-of-sat-changes-in-shasta-v141">Summary of SAT Changes in Shasta v1.4.1</h2>
<p>We released version 2.0.4 of the SAT product in Shasta v1.4.1.</p>
<p>This version of the SAT product included:</p>
<ul>
<li>Version 3.5.0 of the <code>sat</code> python package and CLI.</li>
<li>Version 1.4.3 of the <code>sat-podman</code> wrapper script.</li>
</ul>
<p>The following sections detail the changes in this release.</p>
<h3 id="new-commands-to-translate-between-nids-and-xnames">New Commands to Translate Between NIDs and XNames</h3>
<p>Two new commands were added to translate between NIDs and XNames:</p>
<ul>
<li><code>sat nid2xname</code></li>
<li><code>sat xname2nid</code></li>
</ul>
<p>These commands perform this translation by making requests to the Hardware
State Manager (HSM) API.</p>
<h3 id="bug-fixes-3">Bug Fixes</h3>
<ul>
<li>Fixed a problem in <code>sat swap</code> where creating the offline port policy failed.</li>
<li>Changed <code>sat bootsys shutdown --stage bos-operations</code> to no longer forcefully
power off <em>all</em> compute nodes and application nodes using CAPMC when BOS
sessions complete or time out.</li>
<li>Fixed an issue with the command <code>sat bootsys boot --stage cabinet-power</code>.</li>
</ul>
<h2 id="summary-of-sat-changes-in-shasta-v14">Summary of SAT Changes in Shasta v1.4</h2>
<p>In Shasta v1.4, SAT became an independent product, which meant we began to
designate a version number for the entire SAT product. We released version
2.0.3 of the SAT product in Shasta v1.4.</p>
<p>This version of the SAT product included the following components:</p>
<ul>
<li>Version 3.4.0 of the <code>sat</code> python package and CLI</li>
</ul>
<p>It also added the following new component:</p>
<ul>
<li>Version 1.4.2 of the <code>sat-podman</code> wrapper script</li>
</ul>
<p>The following sections detail the changes in this release.</p>
<h3 id="sat-as-an-independent-product">SAT as an Independent Product</h3>
<p>SAT is now packaged and released as an independent product. The product
deliverable is called a &ldquo;release distribution&rdquo;. The release distribution is a
gzipped tar file containing an install script. This install script loads the
<code>cray/cray-sat</code> container image into the Docker registry in Nexus and loads the
<code>cray-sat-podman</code> RPM into a package repository in Nexus.</p>
<p>In this release, the <code>cray-sat-podman</code> package is still installed in the master
and worker NCN images provided by CSM. This is changed in SAT 2.1.16 released in
Shasta v1.5.</p>
<h3 id="sat-running-in-a-container-under-podman">SAT Running in a Container Under Podman</h3>
<p>The <code>sat</code> command now runs in a container under Podman. The <code>sat</code> executable is
now installed on all nodes in the Kubernetes management cluster (workers and
masters). This executable is a wrapper script that starts a SAT container in
Podman and invokes the <code>sat</code> Python CLI within that container. The admin can run
individual <code>sat</code> commands directly on the master or worker NCNs as before, or
they can run <code>sat</code> commands inside the SAT container after using <code>sat bash</code> to
enter an interactive shell inside the SAT container.</p>
<p>To view man pages for <code>sat</code> commands, the user can run <code>sat-man SAT_COMMAND</code>,
replacing <code>SAT_COMMAND</code> with the name of the <code>sat</code> command. Alternatively,
the user can enter the <code>sat</code> container with <code>sat bash</code> and use the <code>man</code> command.</p>
<h3 id="new-sat-init-command-and-config-file-location-change">New <code>sat init</code> Command and Config File Location Change</h3>
<p>The default location of the SAT config file has been changed from <code>/etc/sat.toml</code>
to <code>~/.config/sat/sat.toml</code>. A new command, <code>sat init</code>, has been added that
initializes a configuration file in the new default directory. This better supports
individual users on the system who want their own config files.</p>
<p><code>~/.config/sat</code> is mounted into the container that runs under Podman, so changes
are persistent across invocations of the <code>sat</code> container. If desired, an alternate
configuration directory can be specified with the <code>SAT_CONFIG_DIR</code> environment variable.</p>
<p>Additionally, if a config file does not yet exist when a user runs a <code>sat</code>
command, one is generated automatically.</p>
<h3 id="additional-types-added-to-sat-hwinv">Additional Types Added to <code>sat hwinv</code></h3>
<p>Additional functionality has been added to <code>sat hwinv</code> including:</p>
<ul>
<li>List node enclosure power supplies with the <code>--list-node-enclosure-power-supplies</code> option.</li>
<li>List node accelerators (for example, GPUs) with the <code>--list-node-accels</code> option. The
count of node accelerators is also included for each node.</li>
<li>List node accelerator risers (for example, Redstone modules) with the <code>--list-node-accel-risers</code>
option. The count of node accelerator risers is also included for each node.</li>
<li>List High-Speed Node Network Interface Cards (HSN NICs) with the <code>--list-node-hsn-nics</code>
option. The count of HSN NICs is also included for each node.</li>
</ul>
<p>Documentation for these new options has been added to the man page for <code>sat hwinv</code>.</p>
<h3 id="site-information-stored-by-sat-setrev-in-s3">Site Information Stored by <code>sat setrev</code> in S3</h3>
<p>The <code>sat setrev</code> and <code>sat showrev</code> commands now use S3 to store and obtain site
information, including system name, site name, serial number, install date, and
system type. Since the information is stored in S3, it will now be consistent
regardless of the node on which <code>sat</code> is executed.</p>
<p>As a result of this change, S3 credentials must be configured for SAT. For more
information, see <a href="/docs-sat/en-24/install/#generate-sat-s3-credentials">Generate SAT S3 Credentials</a>.</p>
<h3 id="product-version-information-shown-by-sat-showrev">Product Version Information Shown by <code>sat showrev</code></h3>
<p><code>sat showrev</code> now shows product information from the <code>cray-product-catalog</code>
ConfigMap in Kubernetes.</p>
<h3 id="additional-changes-to-sat-showrev">Additional Changes to <code>sat showrev</code></h3>
<p>The output from <code>sat showrev</code> has also been changed in the following ways:</p>
<ul>
<li>The <code>--docker</code> and <code>--packages</code> options were considered misleading and have
been removed.</li>
<li>Information pertaining to only to the local host, where the command is run,
has been moved to the output of the <code>--local</code> option.</li>
</ul>
<h3 id="removal-of-sat-cablecheck">Removal of <code>sat cablecheck</code></h3>
<p>The <code>sat cablecheck</code> command has been removed. To verify that the system&rsquo;s Slingshot
network is cabled correctly, admins should now use the <code>show cables</code> command in the
Slingshot Topology Tool (STT).</p>
<h3 id="sat-swap-command-compatibility-with-next-gen-fabric-controller"><code>sat swap</code> Command Compatibility with Next-gen Fabric Controller</h3>
<p>The <code>sat swap</code> command was added in Shasta v1.3.2. This command used the Fabric
Controller API. Shasta v1.4 introduced a new Fabric Manager API and removed the
Fabric Controller API, so this command has been rewritten to use the new
backwards-incompatible API. Usage of the command did not change.</p>
<h3 id="sat-bootsys-functionality"><code>sat bootsys</code> Functionality</h3>
<p>Much of the functionality added to <code>sat bootsys</code> in Shasta v1.3.2 was broken
by changes introduced in Shasta v1.4, which removed the Ansible inventory
and playbooks.</p>
<p>The functionality in the <code>platform-services</code> stage of <code>sat bootsys</code> has been
re-implemented to use python directly instead of Ansible. This resulted in
a more robust procedure with better logging to the <code>sat</code> log file. Failures
to stop containers on Kubernetes nodes are handled more gracefully, and
more information about the containers that failed to stop, including how to
debug the problem, is included.</p>
<p>Improvements were made to console logging setup for non-compute nodes
(NCNs) when they are shut down and booted.</p>
<p>The following improvements were made to the <code>bos-operations</code> stage
of <code>sat bootsys</code>:</p>
<ul>
<li>More information about the BOS sessions, BOA jobs, and BOA pods is printed.</li>
<li>A command-line option, <code>--bos-templates</code>, and a corresponding config-file
option, <code>bos_templates</code>, were added, and the <code>--cle-bos-template</code> and
<code>--uan-bos-template</code> options and their corresponding config file options were
deprecated.</li>
</ul>
<p>The following functionality has been removed from <code>sat bootsys</code>:</p>
<ul>
<li>The <code>hsn-bringup</code> stage of <code>sat bootsys boot</code> has been removed due to removal
of the underlying Ansible playbook.</li>
<li>The <code>bgp-check</code> stage of <code>sat bootys {boot,shutdown}</code> has been removed. It is
now a manual procedure.</li>
</ul>
<h3 id="log-file-location-change">Log File Location Change</h3>
<p>The location of the sat log file has changed from <code>/var/log/cray/sat.log</code> to
<code>/var/log/cray/sat/sat.log</code>. This change simplifies mounting this file into the
sat container running under Podman.</p>
<h2 id="summary-of-sat-changes-in-shasta-v132">Summary of SAT Changes in Shasta v1.3.2</h2>
<p>Shasta v1.3.2 included version 2.4.0 of the <code>sat</code> python package and CLI.</p>
<p>The following sections detail the changes in this release.</p>
<h3 id="sat-swap-command-for-switch-and-cable-replacement"><code>sat swap</code> Command for Switch and Cable Replacement</h3>
<p>The <code>sat switch</code> command which supported operations for replacing a switch has
been deprecated and replaced with the <code>sat swap</code> command, which now supports
replacing a switch OR cable.</p>
<p>The <code>sat swap switch</code> command is equivalent to <code>sat switch</code>. The <code>sat switch</code>
command will be removed in a future release.</p>
<h3 id="addition-of-stages-to-sat-bootsys-command">Addition of Stages to <code>sat bootsys</code> Command</h3>
<p>The <code>sat bootsys</code> command now has multiple stages for both the <code>boot</code> and
<code>shutdown</code> actions. Please refer to the &ldquo;System Power On Procedures&rdquo; and &ldquo;System
Power Off Procedures&rdquo; sections of the <em>Cray Shasta Administration Guide (S-8001)</em>
for more details on using this command in the context of a full system power off
and power on.</p>
<h2 id="summary-of-sat-changes-in-shasta-v13">Summary of SAT Changes in Shasta v1.3</h2>
<p>Shasta v1.3 included version 2.2.3 of the <code>sat</code> python package and CLI.</p>
<p>This version of the <code>sat</code> CLI contained the following commands:</p>
<ul>
<li><code>auth</code></li>
<li><code>bootsys</code></li>
<li><code>cablecheck</code></li>
<li><code>diag</code></li>
<li><code>firmware</code></li>
<li><code>hwinv</code></li>
<li><code>hwmatch</code></li>
<li><code>k8s</code></li>
<li><code>linkhealth</code></li>
<li><code>sensors</code></li>
<li><code>setrev</code></li>
<li><code>showrev</code></li>
<li><code>status</code></li>
<li><code>swap</code></li>
<li><code>switch</code></li>
</ul>
<p>For more information on each of these commands, see the <a href="/docs-sat/en-24/introduction/#system-admin-toolkit-command-overview">System Admin Toolkit Command
Overview</a> and the table
of commands in the <a href="/docs-sat/en-24/install/#sat-authentication">SAT Authentication</a> section
of this document.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-sat/js/clipboard.min.js?1729740967"></script>
    <script src="/docs-sat/js/perfect-scrollbar.min.js?1729740967"></script>
    <script src="/docs-sat/js/perfect-scrollbar.jquery.min.js?1729740967"></script>
    <script src="/docs-sat/js/jquery.sticky.js?1729740967"></script>
    <script src="/docs-sat/js/featherlight.min.js?1729740967"></script>
    <script src="/docs-sat/js/highlight.pack.js?1729740967"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-sat/js/modernizr.custom-3.6.0.js?1729740967"></script>
    <script src="/docs-sat/js/learn.js?1729740967"></script>
    <script src="/docs-sat/js/hugo-learn.js?1729740967"></script>
    
        
            <script src="/docs-sat/mermaid/mermaid.js?1729740967"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

